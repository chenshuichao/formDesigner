{"remainingRequest":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/babel-loader/lib/index.js!/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wison/dev/workspace1/front-end/formDesigner/src/views/index/DraggableItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wison/dev/workspace1/front-end/formDesigner/src/views/index/DraggableItem.vue","mtime":1584520503344},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/.babelrc","mtime":1585050130090},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXMtYXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZSc7CmltcG9ydCByZW5kZXIgZnJvbSAnQC9jb21wb25lbnRzL3JlbmRlcic7CnZhciBjb21wb25lbnRzID0gewogIGl0ZW1CdG5zOiBmdW5jdGlvbiBpdGVtQnRucyhoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICB2YXIgX3RoaXMkJGxpc3RlbmVycyA9IHRoaXMuJGxpc3RlbmVycywKICAgICAgICBjb3B5SXRlbSA9IF90aGlzJCRsaXN0ZW5lcnMuY29weUl0ZW0sCiAgICAgICAgZGVsZXRlSXRlbSA9IF90aGlzJCRsaXN0ZW5lcnMuZGVsZXRlSXRlbTsKICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgImNsYXNzIjogImRyYXdpbmctaXRlbS1jb3B5IiwKICAgICAgImF0dHJzIjogewogICAgICAgICJ0aXRsZSI6ICLlpI3liLYiCiAgICAgIH0sCiAgICAgICJvbiI6IHsKICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgY29weUl0ZW0oZWxlbWVudCwgcGFyZW50KTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgW2goImkiLCB7CiAgICAgICJjbGFzcyI6ICJlbC1pY29uLWNvcHktZG9jdW1lbnQiCiAgICB9KV0pLCBoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiZHJhd2luZy1pdGVtLWRlbGV0ZSIsCiAgICAgICJhdHRycyI6IHsKICAgICAgICAidGl0bGUiOiAi5Yig6ZmkIgogICAgICB9LAogICAgICAib24iOiB7CiAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgIGRlbGV0ZUl0ZW0oaW5kZXgsIHBhcmVudCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtoKCJpIiwgewogICAgICAiY2xhc3MiOiAiZWwtaWNvbi1kZWxldGUiCiAgICB9KV0pXTsKICB9Cn07CnZhciBsYXlvdXRzID0gewogIGNvbEZvcm1JdGVtOiBmdW5jdGlvbiBjb2xGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBhY3RpdmVJdGVtID0gdGhpcy4kbGlzdGVuZXJzLmFjdGl2ZUl0ZW07CiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5hY3RpdmVJZCA9PT0gZWxlbWVudC5mb3JtSWQgPyAnZHJhd2luZy1pdGVtIGFjdGl2ZS1mcm9tLWl0ZW0nIDogJ2RyYXdpbmctaXRlbSc7CiAgICBpZiAodGhpcy5mb3JtQ29uZi51bkZvY3VzZWRDb21wb25lbnRCb3JkZXIpIGNsYXNzTmFtZSArPSAnIHVuZm9jdXMtYm9yZGVyZWQnOwogICAgdmFyIGxhYmVsV2lkdGggPSBlbGVtZW50LmxhYmVsV2lkdGggPyAiIi5jb25jYXQoZWxlbWVudC5sYWJlbFdpZHRoLCAicHgiKSA6IG51bGw7CiAgICBpZiAoZWxlbWVudC5zaG93TGFiZWwgPT09IGZhbHNlKSBsYWJlbFdpZHRoID0gJzAnOwogICAgcmV0dXJuIGgoImVsLWNvbCIsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJzcGFuIjogZWxlbWVudC5zcGFuCiAgICAgIH0sCiAgICAgICJjbGFzcyI6IGNsYXNzTmFtZSwKICAgICAgIm5hdGl2ZU9uIjogewogICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7CiAgICAgICAgICBhY3RpdmVJdGVtKGVsZW1lbnQpOwogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBbaCgiZWwtZm9ybS1pdGVtIiwgewogICAgICAiYXR0cnMiOiB7CiAgICAgICAgImxhYmVsLXdpZHRoIjogbGFiZWxXaWR0aCwKICAgICAgICAibGFiZWwiOiBlbGVtZW50LnNob3dMYWJlbCA/IGVsZW1lbnQubGFiZWwgOiAnJywKICAgICAgICAicmVxdWlyZWQiOiBlbGVtZW50LnJlcXVpcmVkCiAgICAgIH0KICAgIH0sIFtoKHJlbmRlciwgewogICAgICAia2V5IjogZWxlbWVudC5yZW5kZXJLZXksCiAgICAgICJhdHRycyI6IHsKICAgICAgICAiY29uZiI6IGVsZW1lbnQKICAgICAgfSwKICAgICAgIm9uIjogewogICAgICAgICJpbnB1dCI6IGZ1bmN0aW9uIGlucHV0KGV2ZW50KSB7CiAgICAgICAgICBfdGhpcy4kc2V0KGVsZW1lbnQsICdkZWZhdWx0VmFsdWUnLCBldmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KV0pLCBjb21wb25lbnRzLml0ZW1CdG5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyldKTsKICB9LAogIHJvd0Zvcm1JdGVtOiBmdW5jdGlvbiByb3dGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICB2YXIgYWN0aXZlSXRlbSA9IHRoaXMuJGxpc3RlbmVycy5hY3RpdmVJdGVtOwogICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGVsZW1lbnQuZm9ybUlkID8gJ2RyYXdpbmctcm93LWl0ZW0gYWN0aXZlLWZyb20taXRlbScgOiAnZHJhd2luZy1yb3ctaXRlbSc7CiAgICB2YXIgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdmbGV4JykgewogICAgICBjaGlsZCA9IGgoImVsLXJvdyIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAidHlwZSI6IGVsZW1lbnQudHlwZSwKICAgICAgICAgICJqdXN0aWZ5IjogZWxlbWVudC5qdXN0aWZ5LAogICAgICAgICAgImFsaWduIjogZWxlbWVudC5hbGlnbgogICAgICAgIH0KICAgICAgfSwgW2NoaWxkXSk7CiAgICB9CgogICAgcmV0dXJuIGgoImVsLWNvbCIsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJzcGFuIjogZWxlbWVudC5zcGFuCiAgICAgIH0KICAgIH0sIFtoKCJlbC1yb3ciLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAiZ3V0dGVyIjogZWxlbWVudC5ndXR0ZXIKICAgICAgfSwKICAgICAgImNsYXNzIjogY2xhc3NOYW1lLAogICAgICAibmF0aXZlT24iOiB7CiAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgIGFjdGl2ZUl0ZW0oZWxlbWVudCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiY29tcG9uZW50LW5hbWUiCiAgICB9LCBbZWxlbWVudC5jb21wb25lbnROYW1lXSksIGgoZHJhZ2dhYmxlLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAibGlzdCI6IGVsZW1lbnQuY2hpbGRyZW4sCiAgICAgICAgImFuaW1hdGlvbiI6IDM0MCwKICAgICAgICAiZ3JvdXAiOiAiY29tcG9uZW50c0dyb3VwIgogICAgICB9LAogICAgICAiY2xhc3MiOiAiZHJhZy13cmFwcGVyIgogICAgfSwgW2NoaWxkXSksIGNvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKV0pXSk7CiAgfQp9OwoKZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oaCwgZWxlbWVudCwgaW5kZXgsIHBhcmVudCkgewogIHZhciBfdGhpczIgPSB0aGlzOwoKICBpZiAoIUFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikpIHJldHVybiBudWxsOwogIHJldHVybiBlbGVtZW50LmNoaWxkcmVuLm1hcChmdW5jdGlvbiAoZWwsIGkpIHsKICAgIHZhciBsYXlvdXQgPSBsYXlvdXRzW2VsLmxheW91dF07CgogICAgaWYgKGxheW91dCkgewogICAgICByZXR1cm4gbGF5b3V0LmNhbGwoX3RoaXMyLCBoLCBlbCwgaSwgZWxlbWVudC5jaGlsZHJlbik7CiAgICB9CgogICAgcmV0dXJuIGxheW91dElzTm90Rm91bmQuY2FsbChfdGhpczIpOwogIH0pOwp9CgpmdW5jdGlvbiBsYXlvdXRJc05vdEZvdW5kKCkgewogIHRocm93IG5ldyBFcnJvcigiXHU2Q0ExXHU2NzA5XHU0RTBFIi5jb25jYXQodGhpcy5lbGVtZW50LmxheW91dCwgIlx1NTMzOVx1OTE0RFx1NzY4NGxheW91dCIpKTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHJlbmRlcjogcmVuZGVyLAogICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGUKICB9LAogIHByb3BzOiBbJ2VsZW1lbnQnLCAnaW5kZXgnLCAnZHJhd2luZ0xpc3QnLCAnYWN0aXZlSWQnLCAnZm9ybUNvbmYnXSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgbGF5b3V0ID0gbGF5b3V0c1t0aGlzLmVsZW1lbnQubGF5b3V0XTsKCiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCB0aGlzLmVsZW1lbnQsIHRoaXMuaW5kZXgsIHRoaXMuZHJhd2luZ0xpc3QpOwogICAgfQoKICAgIHJldHVybiBsYXlvdXRJc05vdEZvdW5kLmNhbGwodGhpcyk7CiAgfQp9Ow=="},{"version":3,"sources":["DraggableItem.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\nimport draggable from 'vuedraggable'\nimport render from '@/components/render'\n\nconst components = {\n  itemBtns(h, element, index, parent) {\n    const { copyItem, deleteItem } = this.$listeners\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(index, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  }\n}\nconst layouts = {\n  colFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    let className = this.activeId === element.formId ? 'drawing-item active-from-item' : 'drawing-item'\n    if (this.formConf.unFocusedComponentBorder) className += ' unfocus-bordered'\n    let labelWidth = element.labelWidth ? `${element.labelWidth}px` : null\n    if (element.showLabel === false) labelWidth = '0'\n    return (\n      <el-col span={element.span} class={className}\n        nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n        <el-form-item label-width={labelWidth}\n          label={element.showLabel ? element.label : ''} required={element.required}>\n          <render key={element.renderKey} conf={element} onInput={ event => {\n            this.$set(element, 'defaultValue', event)\n          }} />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n      </el-col>\n    )\n  },\n  rowFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    const className = this.activeId === element.formId ? 'drawing-row-item active-from-item' : 'drawing-row-item'\n    let child = renderChildren.apply(this, arguments)\n    if (element.type === 'flex') {\n      child = <el-row type={element.type} justify={element.justify} align={element.align}>\n              {child}\n            </el-row>\n    }\n    return (\n      <el-col span={element.span}>\n        <el-row gutter={element.gutter} class={className}\n          nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n          <span class=\"component-name\">{element.componentName}</span>\n          <draggable list={element.children} animation={340} group=\"componentsGroup\" class=\"drag-wrapper\">\n            {child}\n          </draggable>\n          {components.itemBtns.apply(this, arguments)}\n        </el-row>\n      </el-col>\n    )\n  }\n}\n\nfunction renderChildren(h, element, index, parent) {\n  if (!Array.isArray(element.children)) return null\n  return element.children.map((el, i) => {\n    const layout = layouts[el.layout]\n    if (layout) {\n      return layout.call(this, h, el, i, element.children)\n    }\n    return layoutIsNotFound.call(this)\n  })\n}\n\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\n}\n\nexport default {\n  components: {\n    render,\n    draggable\n  },\n  props: [\n    'element',\n    'index',\n    'drawingList',\n    'activeId',\n    'formConf'\n  ],\n  render(h) {\n    const layout = layouts[this.element.layout]\n\n    if (layout) {\n      return layout.call(this, h, this.element, this.index, this.drawingList)\n    }\n    return layoutIsNotFound.call(this)\n  }\n}\n</script>\n"],"sourceRoot":"src/views/index"}]}