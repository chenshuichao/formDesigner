{"remainingRequest":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wison/dev/workspace1/front-end/formDesigner/src/components/designItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wison/dev/workspace1/front-end/formDesigner/src/components/designItem.vue","mtime":1585658766939},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwppbXBvcnQgcmVuZGVyIGZyb20gJy4vY3VzdG9tL3JlbmRlcicKCgpjb25zdCBjb21wb25lbnRzID0gewogIGl0ZW1CdG5zKGgsIGVsZW1lbnQscGFyZW50KSB7CiAgICBjb25zdCB7Y29weUl0ZW0sZGVsZXRlSXRlbX0gPSB0aGlzLiRsaXN0ZW5lcnM7CiAgICByZXR1cm4gWwogICAgICA8c3BhbiBjbGFzcz0iZHJhd2luZy1pdGVtLWNvcHkiIHRpdGxlPSLlpI3liLYiIG9uQ2xpY2s9e2V2ZW50ID0+IHsKICAgICAgICBjb3B5SXRlbShlbGVtZW50LHBhcmVudCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9fT4KICAgICAgICA8aSBjbGFzcz0iZWwtaWNvbi1jb3B5LWRvY3VtZW50IiAvPgogICAgICA8L3NwYW4+LAogICAgICA8c3BhbiBjbGFzcz0iZHJhd2luZy1pdGVtLWRlbGV0ZSIgdGl0bGU9IuWIoOmZpCIgb25DbGljaz17ZXZlbnQgPT4gewogICAgICAgIGRlbGV0ZUl0ZW0oZWxlbWVudCxwYXJlbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfX0+CiAgICAgICAgPGkgY2xhc3M9ImVsLWljb24tZGVsZXRlIiAvPgogICAgICA8L3NwYW4+CiAgICBdCiAgfQp9CmNvbnN0IGxheW91dHMgPSB7CiAgY29sSXRlbShoLCBlbGVtZW50LHBhcmVudCkgewogICAgbGV0IGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSXRlbS5pZCA9PT0gZWxlbWVudC5pZCA/ICdkcmF3aW5nLWl0ZW0gYWN0aXZlLWZyb20taXRlbScgOiAnZHJhd2luZy1pdGVtJwogICAgbGV0IGxhYmVsV2lkdGggPSBlbGVtZW50LmxhYmVsV2lkdGggPyBgJHtlbGVtZW50LmxhYmVsV2lkdGh9cHhgIDogbnVsbAogICAgY29uc3Qge29uQWN0aXZlSXRlbUNoYW5nZX0gPSB0aGlzLiRsaXN0ZW5lcnM7CiAgICByZXR1cm4gKAogICAgICA8ZGl2ICBjbGFzcz17Y2xhc3NOYW1lfT4KICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPXtlbGVtZW50LnNob3dMYWJlbCA/IGVsZW1lbnQubGFiZWwgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLXdpZHRoPXtsYWJlbFdpZHRofSAKICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtlbGVtZW50LnJlcXVpcmVkfSBuYXRpdmVPbkNsaWNrPXtldmVudCA9PiB7IG9uQWN0aXZlSXRlbUNoYW5nZShlbGVtZW50KTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9fT4gCiAgICAgICAgICA8cmVuZGVyIGtleT17ZWxlbWVudC5pZH0gY29uZj17ZWxlbWVudH0gb25JbnB1dD17IGV2ZW50ID0+IHsKICAgICAgICAgICAgICB0aGlzLiRzZXQoZWxlbWVudCwgJ3ZhbHVlJywgZXZlbnQpCiAgICAgICAgICAgIH19IAogICAgICAgICAgLz4KICAgICAgICA8L2VsLWZvcm0taXRlbT4KICAgICAgICB7Y29tcG9uZW50cy5pdGVtQnRucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpfQoKICAgICAgPC9kaXY+CiAgICApIAogIH0sCiAgcm93SXRlbShoLCBlbGVtZW50KXsKICAgIGNvbnN0IHsgb25BY3RpdmVJdGVtQ2hhbmdlIH0gPSB0aGlzLiRsaXN0ZW5lcnMKICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSXRlbS5pZCA9PT0gZWxlbWVudC5pZCA/ICdkcmF3aW5nLXJvdy1pdGVtIGFjdGl2ZS1mcm9tLWl0ZW0nIDogJ2RyYXdpbmctcm93LWl0ZW0nICAgIAogICAgcmV0dXJuICgKICAgICAgPGVsLXJvdyAgZ3V0dGVyPXtlbGVtZW50Lmd1dHRlcn0gY2xhc3M9e2NsYXNzTmFtZX0gIG5hdGl2ZU9uQ2xpY2s9e2V2ZW50ID0+IHsgb25BY3RpdmVJdGVtQ2hhbmdlKGVsZW1lbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKX19PgogICAgICAgIDxzcGFuIGNsYXNzPSJjb21wb25lbnQtbmFtZSI+e2VsZW1lbnQuaWR9PC9zcGFuPgogICAgICAgIDxkaXYgY2xhc3M9ImRyYWctd3JhcHBlciI+CiAgICAgICAgICB7CiAgICAgICAgICAgIGVsZW1lbnQuY29sdW1ucy5tYXAoKGl0ZW0saW5kZXgpID0+ewogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZWwtY29sIGNsYXNzPSJkcmFnLWNvbC13cmFwcGVyIiAgc3Bhbj17aXRlbS5zcGFufT4KICAgICAgICAgICAgICAgICAgPGRyYWdnYWJsZSBjbGFzcz0iZHJhZy13cmFwcGVyIHJvdy1kcmFnIiB2LW1vZGVsPXtpdGVtLmxpc3R9IGFuaW1hdGlvbj0iMTAwIiBncm91cD0iY29tcG9uZW50c0dyb3VwIiBvbkFkZD17KGUpPT57dGhpcy5oYW5kbGVyQWRkKGUsaXRlbSxlbGVtZW50KX19CiAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubGlzdC5tYXAoKG9iaixvYmpJbmRleCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlckNoaWxkcmVuLmNhbGwodGhpcyxoLG9iaixlbGVtZW50KQogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIDwvZHJhZ2dhYmxlPgogICAgICAgICAgICAgICAgPC9lbC1jb2w+CiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIDwvZGl2PgogICAgICAgIHtjb21wb25lbnRzLml0ZW1CdG5zLmNhbGwodGhpcyxoLGVsZW1lbnQpfQogICAgICA8L2VsLXJvdz4KICAgICkgICAgCiAgfQp9Ci8qKgogKiDnlJ/miJByb3fnmoTlrZDpgInpobkKICovCmZ1bmN0aW9uIHJlbmRlckNoaWxkcmVuKGgsIGVsZW1lbnQscGFyZW50KSB7CiAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tlbGVtZW50LmxheW91dF0KICBpZiAobGF5b3V0KSB7CiAgICAKICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBlbGVtZW50LHBhcmVudCkKICB9CiAgcmV0dXJuIGxheW91dElzTm90Rm91bmQuY2FsbCh0aGlzKQp9CgpmdW5jdGlvbiBsYXlvdXRJc05vdEZvdW5kKCkgewogIHRocm93IG5ldyBFcnJvcihg5rKh5pyJ5LiOJHt0aGlzLmVsZW1lbnQubGF5b3V0feWMuemFjeeahGxheW91dGApCn0KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ImRlc2lnbkl0ZW0iLAogIGNvbXBvbmVudHM6IHsKICAgIHJlbmRlciwKICAgIGRyYWdnYWJsZQogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGVsOiB7IAogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6e30KICAgIH0sCiAgICBhY3RpdmVJdGVtOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDp7fQogICAgfQogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlQ29tcG9uZW50OnRoaXMuYWN0aXZlSXRlbQogICAgfQogIH0sCiAgcmVuZGVyKGgpIHsKICAgIGNvbnN0IGxheW91dCA9IGxheW91dHNbdGhpcy5tb2RlbC5sYXlvdXRdCiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCB0aGlzLm1vZGVsKQogICAgfQogICAgcmV0dXJuIGxheW91dElzTm90Rm91bmQuY2FsbCh0aGlzKQogIH0sCiAgbWV0aG9kczp7CiAgICAKICAgIGhhbmRsZXJBZGQoZXZ0LGl0ZW0scm93KXsKICAgICAgaWYoZXZ0LnB1bGxNb2RlID09PSAnY2xvbmUnKXsKICAgICAgICBpdGVtLmxpc3Quc3BsaWNlKGV2dC5uZXdJbmRleCwwLHRoaXMuYWN0aXZlSXRlbSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOnsKICB9LAogIHdhdGNoOnsKICAgIGFjdGl2ZUl0ZW0gKG5ld1ZhbHVlLG9sZFZhbHVlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLmFjdGl2ZUl0ZW0nKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5hY3RpdmVJdGVtKTsKICAgICAgLy8gY29uc29sZS5sb2cobmV3VmFsdWUpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["designItem.vue"],"names":[],"mappings":";AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"designItem.vue","sourceRoot":"src/components","sourcesContent":["<script>\nimport draggable from 'vuedraggable'\nimport render from './custom/render'\n\n\nconst components = {\n  itemBtns(h, element,parent) {\n    const {copyItem,deleteItem} = this.$listeners;\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element,parent); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(element,parent); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  }\n}\nconst layouts = {\n  colItem(h, element,parent) {\n    let className = this.activeItem.id === element.id ? 'drawing-item active-from-item' : 'drawing-item'\n    let labelWidth = element.labelWidth ? `${element.labelWidth}px` : null\n    const {onActiveItemChange} = this.$listeners;\n    return (\n      <div  class={className}>\n        <el-form-item label={element.showLabel ? element.label : ''}\n                      label-width={labelWidth} \n                      required={element.required} nativeOnClick={event => { onActiveItemChange(element); event.stopPropagation()}}> \n          <render key={element.id} conf={element} onInput={ event => {\n              this.$set(element, 'value', event)\n            }} \n          />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n\n      </div>\n    ) \n  },\n  rowItem(h, element){\n    const { onActiveItemChange } = this.$listeners\n    const className = this.activeItem.id === element.id ? 'drawing-row-item active-from-item' : 'drawing-row-item'    \n    return (\n      <el-row  gutter={element.gutter} class={className}  nativeOnClick={event => { onActiveItemChange(element); event.stopPropagation()}}>\n        <span class=\"component-name\">{element.id}</span>\n        <div class=\"drag-wrapper\">\n          {\n            element.columns.map((item,index) =>{\n              return (\n                <el-col class=\"drag-col-wrapper\"  span={item.span}>\n                  <draggable class=\"drag-wrapper row-drag\" v-model={item.list} animation=\"100\" group=\"componentsGroup\" onAdd={(e)=>{this.handlerAdd(e,item,element)}}\n                  >\n                    {\n                      \n                      item.list.map((obj,objIndex)=>{\n                        return renderChildren.call(this,h,obj,element)\n                      })\n                    }\n                  </draggable>\n                </el-col>\n              )\n            })\n          }\n        </div>\n        {components.itemBtns.call(this,h,element)}\n      </el-row>\n    )    \n  }\n}\n/**\n * 生成row的子选项\n */\nfunction renderChildren(h, element,parent) {\n  const layout = layouts[element.layout]\n  if (layout) {\n    \n    return layout.call(this, h, element,parent)\n  }\n  return layoutIsNotFound.call(this)\n}\n\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\n}\nexport default {\n  name:\"designItem\",\n  components: {\n    render,\n    draggable\n  },\n  props: {\n    model: { \n      type: Object,\n      default:{}\n    },\n    activeItem: {\n      type: Object,\n      default:{}\n    }\n  },\n  data(){\n    return {\n      activeComponent:this.activeItem\n    }\n  },\n  render(h) {\n    const layout = layouts[this.model.layout]\n    if (layout) {\n      return layout.call(this, h, this.model)\n    }\n    return layoutIsNotFound.call(this)\n  },\n  methods:{\n    \n    handlerAdd(evt,item,row){\n      if(evt.pullMode === 'clone'){\n        item.list.splice(evt.newIndex,0,this.activeItem);\n      }\n    }\n  },\n  computed:{\n  },\n  watch:{\n    activeItem (newValue,oldValue) {\n      // console.log('this.activeItem');\n      // console.log(this.activeItem);\n      // console.log(newValue);\n    }\n  }\n}\n</script>"]}]}