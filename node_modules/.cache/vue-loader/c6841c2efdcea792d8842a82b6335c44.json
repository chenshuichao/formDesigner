{"remainingRequest":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wison/dev/workspace1/front-end/formDesigner/src/components/designItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wison/dev/workspace1/front-end/formDesigner/src/components/designItem.vue","mtime":1585642157850},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwppbXBvcnQgcmVuZGVyIGZyb20gJy4vY3VzdG9tL3JlbmRlcicKCgpjb25zdCBjb21wb25lbnRzID0gewogIGl0ZW1CdG5zKGgsIGVsZW1lbnQsYWN0aXZlRWxlKSB7CiAgICBjb25zdCB7Y29weUl0ZW0sZGVsZXRlSXRlbX0gPSB0aGlzLiRsaXN0ZW5lcnM7CiAgICByZXR1cm4gWwogICAgICA8c3BhbiBjbGFzcz0iZHJhd2luZy1pdGVtLWNvcHkiIHRpdGxlPSLlpI3liLYiIG9uQ2xpY2s9e2V2ZW50ID0+IHsKICAgICAgICBjb3B5SXRlbShlbGVtZW50KTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH19PgogICAgICAgIDxpIGNsYXNzPSJlbC1pY29uLWNvcHktZG9jdW1lbnQiIC8+CiAgICAgIDwvc3Bhbj4sCiAgICAgIDxzcGFuIGNsYXNzPSJkcmF3aW5nLWl0ZW0tZGVsZXRlIiB0aXRsZT0i5Yig6ZmkIiBvbkNsaWNrPXtldmVudCA9PiB7CiAgICAgICAgZGVsZXRlSXRlbShlbGVtZW50KTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH19PgogICAgICAgIDxpIGNsYXNzPSJlbC1pY29uLWRlbGV0ZSIgLz4KICAgICAgPC9zcGFuPgogICAgXQogIH0sCiAgcm93aXRlbUJ0bnMoaCwgZWxlbWVudCxhY3RpdmVFbGUpIHsKICAgIGNvbnN0IHtjb3B5SXRlbSxkZWxldGVJdGVtfSA9IHRoaXMuJGxpc3RlbmVyczsKICAgIHJldHVybiBbCiAgICAgIDxzcGFuIGNsYXNzPSJkcmF3aW5nLWl0ZW0tY29weSIgdGl0bGU9IuWkjeWItiIgb25DbGljaz17ZXZlbnQgPT4gewogICAgICAgIGNvcHlJdGVtKGVsZW1lbnQsYWN0aXZlRWxlKTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH19PgogICAgICAgIDxpIGNsYXNzPSJlbC1pY29uLWNvcHktZG9jdW1lbnQiIC8+CiAgICAgIDwvc3Bhbj4sCiAgICAgIDxzcGFuIGNsYXNzPSJkcmF3aW5nLWl0ZW0tZGVsZXRlIiB0aXRsZT0i5Yig6ZmkIiBvbkNsaWNrPXtldmVudCA9PiB7CiAgICAgICAgZGVsZXRlSXRlbShlbGVtZW50LGFjdGl2ZUVsZSk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9fT4KICAgICAgICA8aSBjbGFzcz0iZWwtaWNvbi1kZWxldGUiIC8+CiAgICAgIDwvc3Bhbj4KICAgIF0KICB9Cn0KY29uc3QgbGF5b3V0cyA9IHsKICBjb2xJdGVtKGgsIGVsZW1lbnQsYWN0aXZlKSB7CiAgICBsZXQgY2xhc3NOYW1lID0gYWN0aXZlLmlkID09PSBlbGVtZW50LmlkID8gJ2RyYXdpbmctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJyA6ICdkcmF3aW5nLWl0ZW0nCiAgICBsZXQgbGFiZWxXaWR0aCA9IGVsZW1lbnQubGFiZWxXaWR0aCA/IGAke2VsZW1lbnQubGFiZWxXaWR0aH1weGAgOiBudWxsCiAgICAvL2lmIChlbGVtZW50LnNob3dMYWJlbCA9PT0gZmFsc2UpIGxhYmVsV2lkdGggPSAnMCcKICAgIGNvbnN0IHtvbkFjdGl2ZUl0ZW1DaGFuZ2V9ID0gdGhpcy4kbGlzdGVuZXJzOwogICAgcmV0dXJuICgKICAgICAgPGRpdiAgY2xhc3M9e2NsYXNzTmFtZX0+CiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD17ZWxlbWVudC5zaG93TGFiZWwgPyBlbGVtZW50LmxhYmVsIDogJyd9CiAgICAgICAgICAgICAgICAgICAgICBsYWJlbC13aWR0aD17bGFiZWxXaWR0aH0gCiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17ZWxlbWVudC5yZXF1aXJlZH0gbmF0aXZlT25DbGljaz17ZXZlbnQgPT4geyBvbkFjdGl2ZUl0ZW1DaGFuZ2UoZWxlbWVudCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfX0+IAogICAgICAgICAgPHJlbmRlciBrZXk9e2VsZW1lbnQuaWR9IGNvbmY9e2VsZW1lbnR9IG9uSW5wdXQ9eyBldmVudCA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kc2V0KGVsZW1lbnQsICd2YWx1ZScsIGV2ZW50KQogICAgICAgICAgICB9fSAKICAgICAgICAgIC8+CiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+CiAgICAgICAge2NvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKX0KCiAgICAgIDwvZGl2PgogICAgKSAKICB9LAogIHJvd0l0ZW0oaCwgZWxlbWVudCxhY3RpdmUpewogICAgY29uc3QgeyBvbkFjdGl2ZUl0ZW1DaGFuZ2UgfSA9IHRoaXMuJGxpc3RlbmVycwogICAgY29uc3QgY2xhc3NOYW1lID0gYWN0aXZlLmlkID09PSBlbGVtZW50LmlkID8gJ2RyYXdpbmctcm93LWl0ZW0gYWN0aXZlLWZyb20taXRlbScgOiAnZHJhd2luZy1yb3ctaXRlbScKCiAgICAvLyBpZihlbGVtZW50LmlkID09PSBkcm9wZE9iai50b0lkJmRyb3BkT2JqLnRvSW5kZXg+LTEpewogICAgLy8gICBlbGVtZW50LmNvbHVtbnNbZHJvcGRPYmoudG9JbmRleF0ubGlzdC5wdXNoKGFjdGl2ZSk7CiAgICAvLyAgIHJlc2V0VG9Ecm9wT2JqKCk7CiAgICAvLyB9CiAgICAvLyBpZihlbGVtZW50LmlkID09PSBkcm9wZE9iai5mcm9tSWQmZHJvcGRPYmouZnJvbUluZGV4Pi0xKXsKICAgIC8vICAgbGV0IGl0ZW1MaXN0ID0gZWxlbWVudC5jb2x1bW5zW2Ryb3BkT2JqLmZyb21JbmRleF0ubGlzdDsKICAgIC8vICAgY29uc3QgaXRlbUluZGV4ID0gaXRlbUxpc3QuZmluZEluZGV4KGl0ZW09Pml0ZW0uaWQgPT09IGRyb3BkT2JqLmZyb21JZCk7CiAgICAvLyAgIGVsZW1lbnQuY29sdW1uc1tkcm9wZE9iai5mcm9tSW5kZXhdLmxpc3QgPSBpdGVtTGlzdC5zcGxpY2UoaXRlbUluZGV4LDEpOwogICAgLy8gICByZXNldEZyb21Ecm9wT2JqKCk7CiAgICAvLyB9CiAgICAKICAgIHJldHVybiAoCiAgICAgICAgPGVsLXJvdyAgY2xhc3M9e2NsYXNzTmFtZX0gbmF0aXZlT25DbGljaz17ZXZlbnQgPT4geyBvbkFjdGl2ZUl0ZW1DaGFuZ2UoZWxlbWVudCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfX0+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iY29tcG9uZW50LW5hbWUiPntlbGVtZW50LmlkfTwvc3Bhbj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImRyYWctd3JhcHBlciI+CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAKICAgICAgICAgICAgICBlbGVtZW50LmNvbHVtbnMubWFwKChpdGVtLGluZGV4KSA9PnsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIDxlbC1jb2wgY2xhc3M9ImRyYWctY29sLXdyYXBwZXIiIGd1dHRlcj17ZWxlbWVudC5ndXR0ZXJ9IHNwYW49e2l0ZW0uc3Bhbn0+CiAgICAgICAgICAgICAgICAgICAgPGRyYWdnYWJsZSBjbGFzcz0iZHJhZy13cmFwcGVyIHJvdy1kcmFnIiB2LW1vZGVsPXtpdGVtLmxpc3R9IGFuaW1hdGlvbj0iMTAwIiBncm91cD0iY29tcG9uZW50c0dyb3VwIiBvbkFkZD17KGUpPT57dGhpcy5oYW5kbGVyQWRkKGUsaXRlbSxlbGVtZW50KX19CiAgICAgICAgICAgICAgICAgICAgICBvblJlbW92ZT17KGUpPT57dGhpcy5oYW5kbGVyVXBkYXRlKGUsaXRlbSxlbGVtZW50KX19CiAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5saXN0Lm1hcCgob2JqLG9iakluZGV4KT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJDaGlsZHJlbi5jYWxsKHRoaXMsaCxvYmosdGhpcy5hY3RpdmVJdGVtKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDwvZHJhZ2dhYmxlPgogICAgICAgICAgICAgICAgICA8L2VsLWNvbD4KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIHtjb21wb25lbnRzLnJvd2l0ZW1CdG5zLmNhbGwodGhpcyxoLGVsZW1lbnQpfQogICAgICAgIDwvZWwtcm93PgogICAgKQogIH0KfQoKCi8qKgogKiDnlJ/miJByb3fnmoTlrZDpgInpobkKICovCmZ1bmN0aW9uIHJlbmRlckNoaWxkcmVuKGgsIGVsZW1lbnQsYWN0aXZlKSB7CiAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tlbGVtZW50LmxheW91dF0KICBpZiAobGF5b3V0KSB7CiAgICAKICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBlbGVtZW50LGFjdGl2ZSkKICB9CiAgcmV0dXJuIGxheW91dElzTm90Rm91bmQuY2FsbCh0aGlzKQp9CgoKLy9sZXQgZHJvcGRJbmRleCA9IC0xOwpsZXQgZHJvcGRPYmogPSB7fQoKZnVuY3Rpb24gcmVzZXRUb0Ryb3BPYmooKXsKICBkcm9wZE9iai50b0lkID0gJyc7CiAgZHJvcGRPYmoudG9JbmRleCA9IC0xOwogIC8vIGRyb3BkT2JqLmZyb21JZCA9ICcnOwogIC8vIGRyb3BkT2JqLmZyb21JbmRleCA9IC0xOwp9CgpmdW5jdGlvbiByZXNldEZyb21Ecm9wT2JqKCl7CiAgLy8gZHJvcGRPYmoudG9JZCA9ICcnOwogIC8vIGRyb3BkT2JqLnRvSW5kZXggPSAtMTsKICBkcm9wZE9iai5mcm9tSWQgPSAnJzsKICBkcm9wZE9iai5mcm9tSW5kZXggPSAtMTsKfQpmdW5jdGlvbiBsYXlvdXRJc05vdEZvdW5kKCkgewogIHRocm93IG5ldyBFcnJvcihg5rKh5pyJ5LiOJHt0aGlzLmVsZW1lbnQubGF5b3V0feWMuemFjeeahGxheW91dGApCn0KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ImRlc2lnbkl0ZW0iLAogIGNvbXBvbmVudHM6IHsKICAgIHJlbmRlciwKICAgIGRyYWdnYWJsZQogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGVsOiB7IAogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6e30KICAgIH0sCiAgICBhY3RpdmVJdGVtOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDp7fQogICAgfQogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlQ29tcG9uZW50OnRoaXMuYWN0aXZlSXRlbQogICAgfQogIH0sCiAgcmVuZGVyKGgpIHsKICAgIGNvbnN0IGxheW91dCA9IGxheW91dHNbdGhpcy5tb2RlbC5sYXlvdXRdCiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCB0aGlzLm1vZGVsLCB0aGlzLmFjdGl2ZUNvbXBvbmVudCkKICAgIH0KICAgIHJldHVybiBsYXlvdXRJc05vdEZvdW5kLmNhbGwodGhpcykKICB9LAogIG1ldGhvZHM6ewogICAgCiAgICBoYW5kbGVyQWRkKGV2dCxpdGVtLHJvdyl7CiAgICAgIGlmKGV2dC5wdWxsTW9kZSA9PT0gJ2Nsb25lJyl7CiAgICAgICAgaXRlbS5saXN0LnNwbGljZShldnQubmV3SW5kZXgsMCx0aGlzLmFjdGl2ZUl0ZW0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgfSwKICB3YXRjaDp7CiAgICBhY3RpdmVJdGVtIChuZXdWYWx1ZSxvbGRWYWx1ZSkgewogICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5hY3RpdmVJdGVtJyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYWN0aXZlSXRlbSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1ZhbHVlKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["designItem.vue"],"names":[],"mappings":";AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"designItem.vue","sourceRoot":"src/components","sourcesContent":["<script>\nimport draggable from 'vuedraggable'\nimport render from './custom/render'\n\n\nconst components = {\n  itemBtns(h, element,activeEle) {\n    const {copyItem,deleteItem} = this.$listeners;\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(element); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  },\n  rowitemBtns(h, element,activeEle) {\n    const {copyItem,deleteItem} = this.$listeners;\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element,activeEle); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(element,activeEle); event.stopPropagation();\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  }\n}\nconst layouts = {\n  colItem(h, element,active) {\n    let className = active.id === element.id ? 'drawing-item active-from-item' : 'drawing-item'\n    let labelWidth = element.labelWidth ? `${element.labelWidth}px` : null\n    //if (element.showLabel === false) labelWidth = '0'\n    const {onActiveItemChange} = this.$listeners;\n    return (\n      <div  class={className}>\n        <el-form-item label={element.showLabel ? element.label : ''}\n                      label-width={labelWidth} \n                      required={element.required} nativeOnClick={event => { onActiveItemChange(element); event.stopPropagation()}}> \n          <render key={element.id} conf={element} onInput={ event => {\n              this.$set(element, 'value', event)\n            }} \n          />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n\n      </div>\n    ) \n  },\n  rowItem(h, element,active){\n    const { onActiveItemChange } = this.$listeners\n    const className = active.id === element.id ? 'drawing-row-item active-from-item' : 'drawing-row-item'\n\n    // if(element.id === dropdObj.toId&dropdObj.toIndex>-1){\n    //   element.columns[dropdObj.toIndex].list.push(active);\n    //   resetToDropObj();\n    // }\n    // if(element.id === dropdObj.fromId&dropdObj.fromIndex>-1){\n    //   let itemList = element.columns[dropdObj.fromIndex].list;\n    //   const itemIndex = itemList.findIndex(item=>item.id === dropdObj.fromId);\n    //   element.columns[dropdObj.fromIndex].list = itemList.splice(itemIndex,1);\n    //   resetFromDropObj();\n    // }\n    \n    return (\n        <el-row  class={className} nativeOnClick={event => { onActiveItemChange(element); event.stopPropagation()}}>\n          <span class=\"component-name\">{element.id}</span>\n          <div class=\"drag-wrapper\">\n            {\n              \n              element.columns.map((item,index) =>{\n                return (\n                  <el-col class=\"drag-col-wrapper\" gutter={element.gutter} span={item.span}>\n                    <draggable class=\"drag-wrapper row-drag\" v-model={item.list} animation=\"100\" group=\"componentsGroup\" onAdd={(e)=>{this.handlerAdd(e,item,element)}}\n                      onRemove={(e)=>{this.handlerUpdate(e,item,element)}}\n                    >\n                      {\n                        \n                        item.list.map((obj,objIndex)=>{\n                          return renderChildren.call(this,h,obj,this.activeItem)\n                        })\n                      }\n                    </draggable>\n                  </el-col>\n                )\n              })\n            }\n          </div>\n          {components.rowitemBtns.call(this,h,element)}\n        </el-row>\n    )\n  }\n}\n\n\n/**\n * 生成row的子选项\n */\nfunction renderChildren(h, element,active) {\n  const layout = layouts[element.layout]\n  if (layout) {\n    \n    return layout.call(this, h, element,active)\n  }\n  return layoutIsNotFound.call(this)\n}\n\n\n//let dropdIndex = -1;\nlet dropdObj = {}\n\nfunction resetToDropObj(){\n  dropdObj.toId = '';\n  dropdObj.toIndex = -1;\n  // dropdObj.fromId = '';\n  // dropdObj.fromIndex = -1;\n}\n\nfunction resetFromDropObj(){\n  // dropdObj.toId = '';\n  // dropdObj.toIndex = -1;\n  dropdObj.fromId = '';\n  dropdObj.fromIndex = -1;\n}\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\n}\nexport default {\n  name:\"designItem\",\n  components: {\n    render,\n    draggable\n  },\n  props: {\n    model: { \n      type: Object,\n      default:{}\n    },\n    activeItem: {\n      type: Object,\n      default:{}\n    }\n  },\n  data(){\n    return {\n      activeComponent:this.activeItem\n    }\n  },\n  render(h) {\n    const layout = layouts[this.model.layout]\n    if (layout) {\n      return layout.call(this, h, this.model, this.activeComponent)\n    }\n    return layoutIsNotFound.call(this)\n  },\n  methods:{\n    \n    handlerAdd(evt,item,row){\n      if(evt.pullMode === 'clone'){\n        item.list.splice(evt.newIndex,0,this.activeItem);\n      }\n    }\n  },\n  computed:{\n  },\n  watch:{\n    activeItem (newValue,oldValue) {\n      // console.log('this.activeItem');\n      // console.log(this.activeItem);\n      // console.log(newValue);\n    }\n  }\n}\n</script>"]}]}