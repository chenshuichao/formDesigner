{"remainingRequest":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wison/dev/workspace1/front-end/formDesigner/src/views/index/DraggableItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wison/dev/workspace1/front-end/formDesigner/src/views/index/DraggableItem.vue","mtime":1584520503344},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/wison/dev/workspace1/front-end/formDesigner/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwppbXBvcnQgcmVuZGVyIGZyb20gJ0AvY29tcG9uZW50cy9yZW5kZXInCgpjb25zdCBjb21wb25lbnRzID0gewogIGl0ZW1CdG5zKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICAgIGNvbnN0IHsgY29weUl0ZW0sIGRlbGV0ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVycwogICAgcmV0dXJuIFsKICAgICAgPHNwYW4gY2xhc3M9ImRyYXdpbmctaXRlbS1jb3B5IiB0aXRsZT0i5aSN5Yi2IiBvbkNsaWNrPXtldmVudCA9PiB7CiAgICAgICAgY29weUl0ZW0oZWxlbWVudCwgcGFyZW50KTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgfX0+CiAgICAgICAgPGkgY2xhc3M9ImVsLWljb24tY29weS1kb2N1bWVudCIgLz4KICAgICAgPC9zcGFuPiwKICAgICAgPHNwYW4gY2xhc3M9ImRyYXdpbmctaXRlbS1kZWxldGUiIHRpdGxlPSLliKDpmaQiIG9uQ2xpY2s9e2V2ZW50ID0+IHsKICAgICAgICBkZWxldGVJdGVtKGluZGV4LCBwYXJlbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKQogICAgICB9fT4KICAgICAgICA8aSBjbGFzcz0iZWwtaWNvbi1kZWxldGUiIC8+CiAgICAgIDwvc3Bhbj4KICAgIF0KICB9Cn0KY29uc3QgbGF5b3V0cyA9IHsKICBjb2xGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVycwogICAgbGV0IGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGVsZW1lbnQuZm9ybUlkID8gJ2RyYXdpbmctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJyA6ICdkcmF3aW5nLWl0ZW0nCiAgICBpZiAodGhpcy5mb3JtQ29uZi51bkZvY3VzZWRDb21wb25lbnRCb3JkZXIpIGNsYXNzTmFtZSArPSAnIHVuZm9jdXMtYm9yZGVyZWQnCiAgICBsZXQgbGFiZWxXaWR0aCA9IGVsZW1lbnQubGFiZWxXaWR0aCA/IGAke2VsZW1lbnQubGFiZWxXaWR0aH1weGAgOiBudWxsCiAgICBpZiAoZWxlbWVudC5zaG93TGFiZWwgPT09IGZhbHNlKSBsYWJlbFdpZHRoID0gJzAnCiAgICByZXR1cm4gKAogICAgICA8ZWwtY29sIHNwYW49e2VsZW1lbnQuc3Bhbn0gY2xhc3M9e2NsYXNzTmFtZX0KICAgICAgICBuYXRpdmVPbkNsaWNrPXtldmVudCA9PiB7IGFjdGl2ZUl0ZW0oZWxlbWVudCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIH19PgogICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWwtd2lkdGg9e2xhYmVsV2lkdGh9CiAgICAgICAgICBsYWJlbD17ZWxlbWVudC5zaG93TGFiZWwgPyBlbGVtZW50LmxhYmVsIDogJyd9IHJlcXVpcmVkPXtlbGVtZW50LnJlcXVpcmVkfT4KICAgICAgICAgIDxyZW5kZXIga2V5PXtlbGVtZW50LnJlbmRlcktleX0gY29uZj17ZWxlbWVudH0gb25JbnB1dD17IGV2ZW50ID0+IHsKICAgICAgICAgICAgdGhpcy4kc2V0KGVsZW1lbnQsICdkZWZhdWx0VmFsdWUnLCBldmVudCkKICAgICAgICAgIH19IC8+CiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+CiAgICAgICAge2NvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKX0KICAgICAgPC9lbC1jb2w+CiAgICApCiAgfSwKICByb3dGb3JtSXRlbShoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICBjb25zdCB7IGFjdGl2ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVycwogICAgY29uc3QgY2xhc3NOYW1lID0gdGhpcy5hY3RpdmVJZCA9PT0gZWxlbWVudC5mb3JtSWQgPyAnZHJhd2luZy1yb3ctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJyA6ICdkcmF3aW5nLXJvdy1pdGVtJwogICAgbGV0IGNoaWxkID0gcmVuZGVyQ2hpbGRyZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2ZsZXgnKSB7CiAgICAgIGNoaWxkID0gPGVsLXJvdyB0eXBlPXtlbGVtZW50LnR5cGV9IGp1c3RpZnk9e2VsZW1lbnQuanVzdGlmeX0gYWxpZ249e2VsZW1lbnQuYWxpZ259PgogICAgICAgICAgICAgIHtjaGlsZH0KICAgICAgICAgICAgPC9lbC1yb3c+CiAgICB9CiAgICByZXR1cm4gKAogICAgICA8ZWwtY29sIHNwYW49e2VsZW1lbnQuc3Bhbn0+CiAgICAgICAgPGVsLXJvdyBndXR0ZXI9e2VsZW1lbnQuZ3V0dGVyfSBjbGFzcz17Y2xhc3NOYW1lfQogICAgICAgICAgbmF0aXZlT25DbGljaz17ZXZlbnQgPT4geyBhY3RpdmVJdGVtKGVsZW1lbnQpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSB9fT4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb21wb25lbnQtbmFtZSI+e2VsZW1lbnQuY29tcG9uZW50TmFtZX08L3NwYW4+CiAgICAgICAgICA8ZHJhZ2dhYmxlIGxpc3Q9e2VsZW1lbnQuY2hpbGRyZW59IGFuaW1hdGlvbj17MzQwfSBncm91cD0iY29tcG9uZW50c0dyb3VwIiBjbGFzcz0iZHJhZy13cmFwcGVyIj4KICAgICAgICAgICAge2NoaWxkfQogICAgICAgICAgPC9kcmFnZ2FibGU+CiAgICAgICAgICB7Y29tcG9uZW50cy5pdGVtQnRucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpfQogICAgICAgIDwvZWwtcm93PgogICAgICA8L2VsLWNvbD4KICAgICkKICB9Cn0KCmZ1bmN0aW9uIHJlbmRlckNoaWxkcmVuKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICBpZiAoIUFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikpIHJldHVybiBudWxsCiAgcmV0dXJuIGVsZW1lbnQuY2hpbGRyZW4ubWFwKChlbCwgaSkgPT4gewogICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tlbC5sYXlvdXRdCiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBlbCwgaSwgZWxlbWVudC5jaGlsZHJlbikKICAgIH0KICAgIHJldHVybiBsYXlvdXRJc05vdEZvdW5kLmNhbGwodGhpcykKICB9KQp9CgpmdW5jdGlvbiBsYXlvdXRJc05vdEZvdW5kKCkgewogIHRocm93IG5ldyBFcnJvcihg5rKh5pyJ5LiOJHt0aGlzLmVsZW1lbnQubGF5b3V0feWMuemFjeeahGxheW91dGApCn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICByZW5kZXIsCiAgICBkcmFnZ2FibGUKICB9LAogIHByb3BzOiBbCiAgICAnZWxlbWVudCcsCiAgICAnaW5kZXgnLAogICAgJ2RyYXdpbmdMaXN0JywKICAgICdhY3RpdmVJZCcsCiAgICAnZm9ybUNvbmYnCiAgXSwKICByZW5kZXIoaCkgewogICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1t0aGlzLmVsZW1lbnQubGF5b3V0XQoKICAgIGlmIChsYXlvdXQpIHsKICAgICAgcmV0dXJuIGxheW91dC5jYWxsKHRoaXMsIGgsIHRoaXMuZWxlbWVudCwgdGhpcy5pbmRleCwgdGhpcy5kcmF3aW5nTGlzdCkKICAgIH0KICAgIHJldHVybiBsYXlvdXRJc05vdEZvdW5kLmNhbGwodGhpcykKICB9Cn0K"},{"version":3,"sources":["DraggableItem.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DraggableItem.vue","sourceRoot":"src/views/index","sourcesContent":["<script>\nimport draggable from 'vuedraggable'\nimport render from '@/components/render'\n\nconst components = {\n  itemBtns(h, element, index, parent) {\n    const { copyItem, deleteItem } = this.$listeners\n    return [\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\n        copyItem(element, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-copy-document\" />\n      </span>,\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\n        deleteItem(index, parent); event.stopPropagation()\n      }}>\n        <i class=\"el-icon-delete\" />\n      </span>\n    ]\n  }\n}\nconst layouts = {\n  colFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    let className = this.activeId === element.formId ? 'drawing-item active-from-item' : 'drawing-item'\n    if (this.formConf.unFocusedComponentBorder) className += ' unfocus-bordered'\n    let labelWidth = element.labelWidth ? `${element.labelWidth}px` : null\n    if (element.showLabel === false) labelWidth = '0'\n    return (\n      <el-col span={element.span} class={className}\n        nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n        <el-form-item label-width={labelWidth}\n          label={element.showLabel ? element.label : ''} required={element.required}>\n          <render key={element.renderKey} conf={element} onInput={ event => {\n            this.$set(element, 'defaultValue', event)\n          }} />\n        </el-form-item>\n        {components.itemBtns.apply(this, arguments)}\n      </el-col>\n    )\n  },\n  rowFormItem(h, element, index, parent) {\n    const { activeItem } = this.$listeners\n    const className = this.activeId === element.formId ? 'drawing-row-item active-from-item' : 'drawing-row-item'\n    let child = renderChildren.apply(this, arguments)\n    if (element.type === 'flex') {\n      child = <el-row type={element.type} justify={element.justify} align={element.align}>\n              {child}\n            </el-row>\n    }\n    return (\n      <el-col span={element.span}>\n        <el-row gutter={element.gutter} class={className}\n          nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\n          <span class=\"component-name\">{element.componentName}</span>\n          <draggable list={element.children} animation={340} group=\"componentsGroup\" class=\"drag-wrapper\">\n            {child}\n          </draggable>\n          {components.itemBtns.apply(this, arguments)}\n        </el-row>\n      </el-col>\n    )\n  }\n}\n\nfunction renderChildren(h, element, index, parent) {\n  if (!Array.isArray(element.children)) return null\n  return element.children.map((el, i) => {\n    const layout = layouts[el.layout]\n    if (layout) {\n      return layout.call(this, h, el, i, element.children)\n    }\n    return layoutIsNotFound.call(this)\n  })\n}\n\nfunction layoutIsNotFound() {\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\n}\n\nexport default {\n  components: {\n    render,\n    draggable\n  },\n  props: [\n    'element',\n    'index',\n    'drawingList',\n    'activeId',\n    'formConf'\n  ],\n  render(h) {\n    const layout = layouts[this.element.layout]\n\n    if (layout) {\n      return layout.call(this, h, this.element, this.index, this.drawingList)\n    }\n    return layoutIsNotFound.call(this)\n  }\n}\n</script>\n"]}]}